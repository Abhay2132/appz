import{r as l,b as i,j as t}from"./index-75bf890f.js";import{I as N,B as m}from"./views-5a239ed2.js";function I(n){let o=new Set(n),s=[];return o.forEach(u=>s.push(u)),s}const j="/assets/img-669cc4f3.svg",A="/assets/page-526b5976.svg";function B(){var[n,o]=l.useState([""]);l.useState();var[s,u]=l.useState({imgs:0,pages:0,cn:"d-no"}),[f,d]=l.useState("empty");const c=l.useRef(),a=l.useRef();l.useEffect(()=>{document.title="Image Downloader",document.querySelector("#logo").textContent="Image Downloader"},[]);function h(e){e.preventDefault()}async function p(){if(n.length<2&&n[0].length<1)return g();let e=I(n).filter(Boolean);o(e),D(e)}function b(){if(a.current.scrollTo(0,a.current.scrollHeight),n.at(-1).length<6){g();return}o(e=>[...e,""]),c.current.style.visibility="visible",setTimeout(()=>a.current.scrollTo(0,a.current.scrollHeight),10)}function D(e){if(!e||!Array.isArray(e)||e.length<1)return new Error("invalid 'urls' data !");d("loading"),fetch("/imgD",{method:"POST",body:JSON.stringify({urls:e}),headers:{"Content-Type":"application/json"}}).then(r=>r.json()).then(v).catch(r=>{d("err")})}function v(e){if(e.error)return console.error(e);let{imgs:r,token:w,pages:x}=e;d("data"),u({imgs:r,token:w,pages:x,cn:""})}function y(e,r){n[r]=e}function g(){c.current.setAttribute("animate","jiggle"),setTimeout(()=>c.current.setAttribute("animate",""),500)}function S(e,r){if(!r)return n[e]="";if(n.length==1)return o([""]);o([...n.slice(0,e),...n.slice(e+1)])}function k(){console.log({urls:n})}return i("div",{className:"app imgD-box",imgd:f,children:[i("form",{onSubmit:h,className:"imgD-form",autoComplete:"off",children:[t("h2",{onClick:k,className:"imgD-h2",children:" Enter URLs "}),i("div",{id:"urls-box",ref:a,children:[n.map((e,r)=>t(N,{placeholder:"Paste Website Link",mode:"light",remove:S,index:r,url:e,inputHandler:y},r)),t("label",{ref:c,className:"urls-box-footer",children:"* Paste new url"})]}),t(m,{bg:"rgba(0,0,0,0.8)",onClick:b,children:"Add More"}),t(m,{bg:"Green",onClick:p,children:"Submit "})]}),t(L,{}),t(C,{data:s}),t(E,{})]})}function C({data:n}){function o(s){window.open("/imgD/dl?token="+s)}return i("div",{id:"result-panel",children:[t("div",{id:"ir-head",children:"Result"}),i("div",{className:"ir-info",children:[t("img",{src:j,height:"30px"}),i("span",{children:[" ",n.imgs," Images"]})]}),i("div",{className:"ir-info",children:[t("img",{src:A,height:"30px"}),i("span",{children:[" ",n.pages," Webpages"]})]}),t("center",{children:t("button",{onClick:()=>o(n.token),children:"Download Zip"})})]})}function L(){return i("div",{className:"loader-box",children:[t("div",{className:"loader-spinner"}),t("center",{animate:"blinking",children:" LOADING "})]})}function E({err:n}){return i("div",{className:"err",children:[t("center",{animate:"jiggle",children:"Error Occured "}),t("center",{animate:"jiggle1",children:"Try Submiting Again ! "})]})}export{B as default};
